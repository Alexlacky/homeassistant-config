switcher_button:

  default:
    - icon: mdi:water-boiler
    #- cust_1_field: "[[[ return entity.state; ]]]"
    - cust_2_field: ""
    - corner_background_color: "[[[ return 'var(--secondary-text-color)'; ]]]"
    - corner_border_radius: 12px
    - corner_text_color: "var(--button-card-text-field-color)"
    - svg_fill_on: '#bf4040'
    # - svg_path: 'M8 2C6.89 2 6 2.89 6 4V16C6 17.11 6.89 18 8 18H9V20H6V22H9C10.11 22 11 21.11 11 20V18H13V20C13 21.11 13.89 22 15 22H18V20H15V18H16C17.11 18 18 17.11 18 16V4C18 2.89 17.11 2 16 2H8M12 4.97A2 2 0 0 1 14 6.97A2 2 0 0 1 12 8.97A2 2 0 0 1 10 6.97A2 2 0 0 1 12 4.97M10 14.5H14V16H10V14.5Z'
    # - svg_path_on: 'M8 2C6.89 2 6 2.89 6 4V16C6 17.11 6.89 18 8 18H9V20H6V22H9C10.11 22 11 21.11 11 20V18H13V20C13 21.11 13.89 22 15 22H18V20H15V18H16C17.11 18 18 17.11 18 16V4C18 2.89 17.11 2 16 2H8M12 4.97A2 2 0 0 1 14 6.97A2 2 0 0 1 12 8.97A2 2 0 0 1 10 6.97A2 2 0 0 1 12 4.97M10 14.5H14V16H10V14.5Z'
    # - svg_path_colored: 'M 8,2 C 6.89,2 6,2.89 6,4 v 12 c 0,1.11 0.89,2 2,2 h 1 c 2,0 0,0 2,0 h 2 c 2,0 0,0 2,0 h 1 c 1.11,0 2,-0.89 2,-2 V 4 C 18,2.89 17.11,2 16,2 H 8 m 4,2.97 c 1.104569,0 2,0.8954305 2,2 0,1.1045695 -0.895431,2 -2,2 -1.104569,0 -2,-0.8954305 -2,-2 0,-1.1045695 0.895431,-2 2,-2 m -2,9.53 h 4 V 16 h -4 z'
    # - svg_path_colored_on: 'M 8,2 C 6.89,2 6,2.89 6,4 v 12 c 0,1.11 0.89,2 2,2 h 1 c 2,0 0,0 2,0 h 2 c 2,0 0,0 2,0 h 1 c 1.11,0 2,-0.89 2,-2 V 4 C 18,2.89 17.11,2 16,2 H 8 m 4,2.97 c 1.104569,0 2,0.8954305 2,2 0,1.1045695 -0.895431,2 -2,2 -1.104569,0 -2,-0.8954305 -2,-2 0,-1.1045695 0.895431,-2 2,-2 m -2,9.53 h 4 V 16 h -4 z'
    - svg_path: 'M384.01 303.821C339.463 303.821 307.525 290.758 288.01 279.227C268.494 290.758 236.557 303.821 192.01 303.821C147.432 303.821 115.463 290.727 95.963 279.196C82.494 287.133 63.104 295.821 37.775 300.446C20.307 303.821 3.713 292.102 0.525 274.727C-2.646 257.352 8.869 240.696 26.244 237.508C57.479 231.789 73.088 217.446 73.744 216.852C86.354 205.039 106.416 204.946 118.635 217.196C119.275 217.758 143.416 239.821 192.01 239.821S264.744 217.758 265.744 216.821C278.338 205.071 298.416 204.946 310.635 217.196C311.275 217.758 335.416 239.821 384.01 239.821S456.744 217.758 457.744 216.821C470.338 205.071 490.432 205.008 502.65 217.196C502.932 217.446 518.541 231.789 549.775 237.508C567.15 240.696 578.666 257.352 575.494 274.727C572.307 292.102 555.807 303.821 538.244 300.446C512.916 295.821 493.525 287.133 480.057 279.196C460.557 290.727 428.588 303.821 384.01 303.821Z'
    - svg_path_on: 'M384.01 303.821C339.463 303.821 307.525 290.758 288.01 279.227C268.494 290.758 236.557 303.821 192.01 303.821C147.432 303.821 115.463 290.727 95.963 279.196C82.494 287.133 63.104 295.821 37.775 300.446C20.307 303.821 3.713 292.102 0.525 274.727C-2.646 257.352 8.869 240.696 26.244 237.508C57.479 231.789 73.088 217.446 73.744 216.852C86.354 205.039 106.416 204.946 118.635 217.196C119.275 217.758 143.416 239.821 192.01 239.821S264.744 217.758 265.744 216.821C278.338 205.071 298.416 204.946 310.635 217.196C311.275 217.758 335.416 239.821 384.01 239.821S456.744 217.758 457.744 216.821C470.338 205.071 490.432 205.008 502.65 217.196C502.932 217.446 518.541 231.789 549.775 237.508C567.15 240.696 578.666 257.352 575.494 274.727C572.307 292.102 555.807 303.821 538.244 300.446C512.916 295.821 493.525 287.133 480.057 279.196C460.557 290.727 428.588 303.821 384.01 303.821Z'
    - svg_path_colored: 'M37.775 156.445C63.104 151.82 82.494 143.133 95.963 135.195C115.463 146.727 147.432 159.82 192.01 159.82C236.557 159.82 268.494 146.758 288.01 135.227C307.525 146.758 339.463 159.82 384.01 159.82C428.588 159.82 460.557 146.727 480.057 135.195C493.525 143.133 512.916 151.82 538.244 156.445C555.807 159.82 572.307 148.102 575.494 130.727C578.666 113.352 567.15 96.695 549.775 93.508C518.541 87.789 502.932 73.445 502.65 73.195C490.432 61.008 470.338 61.07 457.744 72.82C456.744 73.758 432.604 95.82 384.01 95.82S311.275 73.758 310.635 73.195C298.416 60.945 278.338 61.07 265.744 72.82C264.744 73.758 240.604 95.82 192.01 95.82S119.275 73.758 118.635 73.195C106.416 60.945 86.354 61.039 73.744 72.852C73.088 73.445 57.479 87.789 26.244 93.508C8.869 96.695 -2.646 113.352 0.525 130.727C3.713 148.102 20.307 159.82 37.775 156.445ZM549.775 381.688C518.541 375.969 502.932 361.625 502.65 361.375C490.432 349.188 470.338 349.25 457.744 361C456.744 361.938 432.604 384 384.01 384S311.275 361.938 310.635 361.375C298.416 349.125 278.338 349.25 265.744 361C264.744 361.938 240.604 384 192.01 384S119.275 361.938 118.635 361.375C106.416 349.125 86.354 349.219 73.744 361.031C73.088 361.625 57.479 375.969 26.244 381.688C8.869 384.875 -2.646 401.531 0.525 418.906C3.713 436.281 20.307 448 37.775 444.625C63.104 440 82.494 431.312 95.963 423.375C115.463 434.906 147.432 448 192.01 448C236.557 448 268.494 434.938 288.01 423.406C307.525 434.938 339.463 448 384.01 448C428.588 448 460.557 434.906 480.057 423.375C493.525 431.313 512.916 440 538.244 444.625C555.807 448 572.307 436.281 575.494 418.906C578.666 401.531 567.15 384.875 549.775 381.688Z'
    - svg_path_colored_on: 'M37.775 156.445C63.104 151.82 82.494 143.133 95.963 135.195C115.463 146.727 147.432 159.82 192.01 159.82C236.557 159.82 268.494 146.758 288.01 135.227C307.525 146.758 339.463 159.82 384.01 159.82C428.588 159.82 460.557 146.727 480.057 135.195C493.525 143.133 512.916 151.82 538.244 156.445C555.807 159.82 572.307 148.102 575.494 130.727C578.666 113.352 567.15 96.695 549.775 93.508C518.541 87.789 502.932 73.445 502.65 73.195C490.432 61.008 470.338 61.07 457.744 72.82C456.744 73.758 432.604 95.82 384.01 95.82S311.275 73.758 310.635 73.195C298.416 60.945 278.338 61.07 265.744 72.82C264.744 73.758 240.604 95.82 192.01 95.82S119.275 73.758 118.635 73.195C106.416 60.945 86.354 61.039 73.744 72.852C73.088 73.445 57.479 87.789 26.244 93.508C8.869 96.695 -2.646 113.352 0.525 130.727C3.713 148.102 20.307 159.82 37.775 156.445ZM549.775 381.688C518.541 375.969 502.932 361.625 502.65 361.375C490.432 349.188 470.338 349.25 457.744 361C456.744 361.938 432.604 384 384.01 384S311.275 361.938 310.635 361.375C298.416 349.125 278.338 349.25 265.744 361C264.744 361.938 240.604 384 192.01 384S119.275 361.938 118.635 361.375C106.416 349.125 86.354 349.219 73.744 361.031C73.088 361.625 57.479 375.969 26.244 381.688C8.869 384.875 -2.646 401.531 0.525 418.906C3.713 436.281 20.307 448 37.775 444.625C63.104 440 82.494 431.312 95.963 423.375C115.463 434.906 147.432 448 192.01 448C236.557 448 268.494 434.938 288.01 423.406C307.525 434.938 339.463 448 384.01 448C428.588 448 460.557 434.906 480.057 423.375C493.525 431.313 512.916 440 538.244 444.625C555.807 448 572.307 436.281 575.494 418.906C578.666 401.531 567.15 384.875 549.775 381.688Z'



  card:
    type: custom:decluttering-card
    template: button_two_rows_svg
    variables:
      - entity: '[[entity]]'
      - name: '[[name]]'
      - icon: '[[icon]]'
      - svg_fill: '[[svg_fill]]'
      - svg_path: '[[svg_path]]'
      - svg_fill_on: '[[svg_fill_on]]'
      - svg_path_on: '[[svg_path_on]]'
      - svg_path_colored: '[[svg_path_colored]]'
      - svg_path_colored_on: '[[svg_path_colored_on]]'
      - svg_icon_y: -32
      - svg_icon_width: 576
      - svg_icon_height: 576
      - color: '[[color]]'
      - color_type: '[[color_type]]'
      - text_transform: none
      - corner_text_color: "[[corner_text_color]]"
      - corner_icon_color: ""
      - cust_1_text_color: "[[cust_1_text_color]]"
      - cust_1_icon_color: "[[cust_1_icon_color]]"
      - cust_2_text_color: "[[cust_2_text_color]]"
      - cust_2_icon_color: "[[cust_2_icon_color]]"
      - corner_field: "[[[ 
            if (entity.state == 'off')
              return '';
            else
              return states['sensor.switcher_webapi_time_left'].state; 
          ]]]"
      - corner_border_radius: "[[corner_border_radius]]"
      - corner_background_color: "[[[
            if (entity.state == 'off')
              return 'rgba(0,0,0,0)';
            else
              return 'var(--secondary-text-color)';
          ]]]"
      - cust_1_field: "[[[
            if (entity.state == 'off')
              return 'Off';
            else
              return 'On until ' + states['sensor.switcher_webapi_auto_off_time'].state; 
          ]]]"
      - cust_2_field: "[[cust_2_field]]"
      - state: "[[state]]"
      - hold_action:
          action: more-info
      - tap_action:
          #haptic: heavy
          action: fire-dom-event
          browser_mod:
            command: popup
            hide_header: false
            title: '[[name]]'
            
            card:

              type: custom:layout-card
              layout_type: vertical
              cards:

                # - type: entities
                #   state_color: true
                #   show_header_toggle: false
                #   style: |
                #     ha-card.type-entities {
                #       background: none;
                #       box-shadow: none;
                #       padding: 0.3em 1.25em 0.4em 0.5em;
                #     }
                #   entities:

                #     - entity: sensor.switcher_webapi_electric_current
                #       name: Current
                #     - entity: sensor.switcher_webapi_power_consumption
                #       name: Power
                #     - entity: sensor.switcher_webapi_time_left
                #       name: Time left
                #     - entity: sensor.switcher_webapi_auto_off_time
                #       name: Off time

                #     # - type: custom:hui-element
                #     #   card_type: horizontal-stack
                #     #   style: |
                #     #     #root {
                #     #       justify-content: space-evenly;
                #     #       margin: 1.4em -0.7em 0.7em 0;
                #     #     }
                #     #   cards:

                - type: custom:decluttering-card # Switcher State
                  template: switcher_popup_state

                - type: custom:layout-card
                  layout_type: grid
                  layout_options:
                    grid-template-columns: 1fr 1fr 1fr
                    grid-template-rows: auto
                    grid-gap: 0px 4px
                  cards:

                    - type: custom:decluttering-card # Boiler Power
                      template: simple_button_svg
                      variables:
                        - entity: '[[entity]]'
                        - name: Power
                        - show_name: true
                        - svg_path_colored: 'M381.438 51.562C370.062 44.625 355.313 48.156 348.438 59.438C341.5 70.75 345.031 85.531 356.313 92.438C413.719 127.688 448 188.844 448 256C448 361.875 361.875 448 256 448S64 361.875 64 256C64 188.469 98.562 127.156 156.469 91.969C167.781 85.094 171.406 70.344 164.5 59C157.625 47.688 142.906 44.062 131.531 50.969C59.188 94.906 16 171.531 16 256C16 388.344 123.656 496 256 496S496 388.344 496 256C496 172.031 453.156 95.594 381.438 51.562ZM256 288C269.25 288 280 277.25 280 264V24C280 10.75 269.25 0 256 0S232 10.75 232 24V264C232 277.25 242.75 288 256 288Z'
                        - svg_path_colored_on: 'M381.438 51.562C370.062 44.625 355.313 48.156 348.438 59.438C341.5 70.75 345.031 85.531 356.313 92.438C413.719 127.688 448 188.844 448 256C448 361.875 361.875 448 256 448S64 361.875 64 256C64 188.469 98.562 127.156 156.469 91.969C167.781 85.094 171.406 70.344 164.5 59C157.625 47.688 142.906 44.062 131.531 50.969C59.188 94.906 16 171.531 16 256C16 388.344 123.656 496 256 496S496 388.344 496 256C496 172.031 453.156 95.594 381.438 51.562ZM256 288C269.25 288 280 277.25 280 264V24C280 10.75 269.25 0 256 0S232 10.75 232 24V264C232 277.25 242.75 288 256 288Z'

                    - type: custom:decluttering-card # Turn ON with Timer
                      template: simple_script_button_svg
                      variables:
                        - entity: script.switcher_turn_on_timer_script
                        - name: Timer
                        - show_name: true
                        - svg_path_colored: 'M256 16C242.75 16 232 26.75 232 40V120C232 133.25 242.75 144 256 144S280 133.25 280 120V65.5C374.594 77.344 448 158.25 448 256C448 361.875 361.875 448 256 448S64 361.875 64 256C64 214.688 76.906 175.344 101.312 142.25C109.188 131.562 106.906 116.562 96.25 108.688C85.562 100.812 70.5 103.094 62.688 113.75C32.156 155.188 16 204.375 16 256C16 388.344 123.656 496 256 496S496 388.344 496 256S388.344 16 256 16ZM239.031 272.969C243.719 277.656 249.844 280 256 280S268.281 277.656 272.969 272.969C282.344 263.594 282.344 248.406 272.969 239.031L192.969 159.031C183.594 149.656 168.406 149.656 159.031 159.031S149.656 183.594 159.031 192.969L239.031 272.969Z'
                        - svg_path_colored_on: 'M256 16C242.75 16 232 26.75 232 40V120C232 133.25 242.75 144 256 144S280 133.25 280 120V65.5C374.594 77.344 448 158.25 448 256C448 361.875 361.875 448 256 448S64 361.875 64 256C64 214.688 76.906 175.344 101.312 142.25C109.188 131.562 106.906 116.562 96.25 108.688C85.562 100.812 70.5 103.094 62.688 113.75C32.156 155.188 16 204.375 16 256C16 388.344 123.656 496 256 496S496 388.344 496 256S388.344 16 256 16ZM239.031 272.969C243.719 277.656 249.844 280 256 280S268.281 277.656 272.969 272.969C282.344 263.594 282.344 248.406 272.969 239.031L192.969 159.031C183.594 149.656 168.406 149.656 159.031 159.031S149.656 183.594 159.031 192.969L239.031 272.969Z'


                    - type: custom:decluttering-card # Timer Minutes 15/30/45/60
                      template: next_select_simple_button
                      variables:
                        - entity: input_select.switcher_timer_minutes_input_select
                        - label: Minutes
